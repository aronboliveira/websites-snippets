/**
  Installs listeners for keyboard shortcuts in Whatsapp Web
  1. Crtl + Alt + Right Arrow => Archived messages
  2. Ctrl + Alt + Left Arrow => Unarchived messages
  3. Alt + q => All messages tab
  4. Alt + w => Unread messages tab
  5. Alt + a => Favourites messages tab
  6. Alt + s => Group messages tab
  7. Alt + m => More options click
  8. Alt + n = Create new group
  NOTE: !! THIS NEEDS TO BE REACTIVATED EVERY TIME YOU LOAD THE WEBPAGE !!
**/

javascript:(()=>{const q=()=>{const a=[...(document.body?.getElementsByTagName("button")||[])].filter(b=>{const l=b.getAttribute("aria-label"),t=b.innerText;return["arquivado","arquivados","arquivada","arquivadas","arq.","archived","archive","arch.","archivado","archivados","archivada","archivadas","archivé","archivée","archivés","archivées","archiviato","archiviati","archiviata","archiviate","archiviert","archiv","архив","архивирован","архивировано","архивированы","архивирована","已归档","归档","存档","已歸檔","歸檔","存檔","アーカイブ","アーカイブ済み","保存済み","保管済み","보관됨","아카이브","보관","مؤرشف","أرشفة","محفوظ","الملفات المؤرشفة","arşivlendi","arşiv","gearchiveerd","archief","आर्काइव्ड","संग्रहित","अभिलेखागार","diarsipkan","arsip","đã lưu trữ","lưu trữ","ที่เก็บถาวร","เก็บถาวร","בארכיון","ארכיון","αρχειοθετημένα","αρχειοθέτηση","arc.","archd","archv"].some(s=>[l,t].some(x=>x?.toString().trim().toLowerCase()===s.trim().toLowerCase()))}).at(0),b=[...document.getElementsByTagName("header")].filter(h=>h.getElementsByTagName("button")||h.querySelector('[role="button"]')).flatMap(h=>[...h.getElementsByTagName("button"),...h.querySelectorAll('[role="button"]')]).filter(b=>[b.getAttribute("aria-label"),b.getAttribute("data-icon")].some(l=>l?.toLowerCase().trim()==="back"||l?.toLowerCase().trim().startsWith("back-"))).at(0),t=[...document.body.querySelectorAll('button[role="tab"]')],al=document.getElementById("all-filter")??t.find(b=>["all","todos","tout","alle","tutti","все","全部","すべて","전체","الكل","सभी","সব","تمام","semua","tất cả","tümü","wszystko","allemaal","all"].includes(b.innerText?.trim().toLowerCase())),u=document.getElementById("unread-filter")??t.find(b=>["unread","não lidos","no leídos","non lus","ungelesen","non letti","непрочитанные","未读","未讀","未読","읽지 않음","غير المقروء","अनपढ़","অপঠিত","انپڑھی","belum dibaca","chưa đọc","okunmamış","nieprzeczytane","ongelezen"].includes(b.innerText?.trim().toLowerCase())),f=document.getElementById("favorites-filter")??t.find(b=>["favourites","favorites","favoritos","favoritas","favoris","favoriten","preferiti","избранное","收藏","お気に入り","즐겨찾기","المفضلة","पसंदीदा","পছন্দের","پسندیدہ","favorit","yêu thích","favoriler","ulubione","favorieten"].includes(b.innerText?.trim().toLowerCase())),g=document.getElementById("group-filter")??t.find(b=>["groups","grupos","groupes","gruppen","gruppi","группы","群组","群組","グループ","그룹","مجموعات","समूह","গ্রুপ","گروپ","grup","nhóm","gruplar","grupy","groepen"].includes(b.innerText?.trim().toLowerCase())),m=[...document.getElementsByTagName("button")].filter(b=>b.title?.trim().toLowerCase()==="menu"&&(b.firstElementChild?.getAttribute("data-icon")?.trim().toLowerCase().startsWith("more-")||b.firstElementChild?.getAttribute("data-icon")?.trim().toLowerCase()==="more")).at(0),n=[...document.getElementsByTagName("li")].flatMap(e=>[...e.querySelectorAll("span"),...e.querySelectorAll("div")]).find(el=>["new group","novo grupo","nuevo grupo","nouveau groupe","neue gruppe","nuovo gruppo","новая группа","新群组","新群組","新しいグループ","새 그룹","مجموعة جديدة","नया समूह","নতুন গ্রুপ","نیا گروپ","grup baru","nhóm mới","yeni grup","nowa grupa","nieuwe groep"].includes(el.innerText?.trim().toLowerCase())),c=[...document.querySelectorAll('div[role="button"]')].find(b=>["close","cerrar","fermer","chiudi","schließen","sluiten","关闭","بستن","إغلاق","κλείσιμο","закрыть","閉じる","닫기","fechar","बंद","বন্ধ","మూసివేయి","திற","അടയ്ക്കു","বন্ধ কৰক","بند","ปิด","đóng","luk","sulje","zavrieť","lukke","bezár","закрити","סגור","sulge","ປິດ"].includes(b.getAttribute("aria-label")?.trim().toLowerCase()));return{a,b,al,u,f,g,m,n,c}},aC=e=>{if(!((e.key==="ArrowRight"||e.key==="Right"||e.keyCode===39)&&e.ctrlKey))return;e.preventDefault();q().a?.click()},bC=e=>{if(!((e.key==="ArrowLeft"||e.key==="Left"||e.keyCode===37)&&e.ctrlKey))return;e.preventDefault();q().b?.click()},alC=e=>{if(!((e.key.toLowerCase()==="q"||e.keyCode===81)&&e.altKey))return;q().al?.click()},uC=e=>{if(!((e.key.toLowerCase()==="w"||e.keyCode===87)&&e.altKey))return;q().u?.click()},fC=e=>{if(!((e.key.toLowerCase()==="a"||e.keyCode===65)&&e.altKey))return;q().f?.click()},gC=e=>{if(!((e.key.toLowerCase()==="s"||e.keyCode===83)&&e.altKey))return;q().g?.click()},mC=e=>{if(!((e.key.toLowerCase()==="m"||e.keyCode===77)&&e.altKey))return;q().m?.click()},nC=e=>{if(!((e.key.toLowerCase()==="n"||e.keyCode===78)&&e.altKey))return;q().n?.click()},cC=e=>{if(!((e.key.toLowerCase()==="b"||e.keyCode===66)&&e.altKey))return;q().c?.click()};const{a,b,al,u,f,g,m,n,c}=q();for(const{e,cb}of[{e:a,cb:aC},{e:b,cb:bC},{e:al,cb:alC},{e:u,cb:uC},{e:f,cb:fC},{e:g,cb:gC},{e:m,cb:mC},{e:n,cb:nC},{e:c,cb:cC}]){if(e instanceof HTMLElement&&e.dataset.listening==="true"){e.removeAttribute("data-listening");window.removeEventListener("keydown",cb)}}setInterval(()=>{const{a,b,al,u,f,g,m,n,c}=q();for(const{e,cb}of[{e:a,cb:aC},{e:b,cb:bC},{e:al,cb:alC},{e:u,cb:uC},{e:f,cb:fC},{e:g,cb:gC},{e:m,cb:mC},{e:n,cb:nC},{e:c,cb:cC}]){if(e instanceof HTMLElement&&e.dataset.listening!=="true"){window.addEventListener("keydown",cb);e.dataset.listening="true"}}},500)})();
